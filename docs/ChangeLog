===============================================================
cice4_0_10
Originator: dbailey (David Bailey)
Date: Tue Mar 20 11:21:11 MDT 2007
Model: CICE
Version: 4.0.10
One-line Summary: Meltponds and new DE radiation.
CCSM Version compatible with: 
Changes made:

- Explicit meltpond code included
- New Delta-Eddington radiation with stability fixes in thermo
- initialized some arrays
===============================================================
===============================================================
cice4_0_9
Originator: dbailey (David Bailey)
Date: Fri Mar 16 09:21:14 MDT 2007
Model: CICE
Version: 4.0.9
One-line Summary: Bug fixes
CCSM Version compatible with: 
Changes made:

A couple of CCSM specific things that got clobbered when synching
with the LANL repo.
===============================================================
===============================================================
cice4_0_7
Originator: dbailey (David Bailey)
Date: Thu Mar 15 10:09:31 MDT 2007
Model: CICE
Version: 4.0.7
One-line Summary: Move to Community Ice Code
CCSM Version compatible with: 
Changes made:

- Added Elizabeth's boundary update fixes and various bug fixes
to get rid of values at land points.
- Move ice_prescribed_mod to the ccsm driver subdirectories
- Deleted COUP_CAM code and added SEQ_MCT ifdef in ice_constants

===============================================================
===============================================================
cice4_0_6
Originator: dbailey (David Bailey)
Date: Wed Feb 28 09:46:02 MST 2007
Model: CICE
Version: 4.0
One-line Summary: Move to Community Ice Code
CCSM Version compatible with: ccsm3_1_beta46
Changes made:

As of ccsm3_1_beta46, CICE 4.0 will be the default sea ice model
in CCSM.

===============================================================
===============================================================
cice4_0 -> cice4_0_5
Originator: dbailey (David Bailey)
Date: August 2006
Model: CICE
Version: 4.0
One-line Summary: Move to Community Ice Code
CCSM Version compatible with:
Changes made:
===============================================================
===============================================================
csim5_2_5
Originator: dbailey (David Bailey)
Date: 21 July 2006
Model: CSIM
Version: 5.2.5
One-line Summary: Changed module for sys_shr_flush
CCSM Version compatible with:
Changes made:

- shr_shr_flush should be found in sys_shr_mod

M /csim4/trunk/models/ice/csim4/source/ice.F
===============================================================
===============================================================
csim5_2_4
Originator: dbailey (David Bailey)
Date: 27 April 2006
Model: CSIM
Version: 5.2.4
One-line Summary: Code modified for explicit typing and autopromotion removed
CCSM Version compatible with:
Changes made:

- Variable daymid ice_flux_in was changed to 'dbl_kind'

M      trunk/models/ice/csim4/source/ice_flux_in.F
M      trunk/docs/ChangeLog

===============================================================
===============================================================
csim5_2_3
Originator: dbailey (David Bailey)
Date: 26 April 2006
Model: CSIM
Version: 5.2.3
One-line Summary: Code modified for explicit typing and autopromotion removed
CCSM Version compatible with:
Changes made:

- All constants explicitly typed in all routines.
- Explicit 'kind=dbl_kind' argument added to all occurences of 
  intrinsic function 'real' 
- The compiler directives -qrealsize=8 and -qdpc=e removed from
  Macros.AIX

M      trunk/models/ice/csim4/source/ice_itd.F
M      trunk/models/ice/csim4/source/ice_transport_mpdata.F
M      trunk/models/ice/csim4/source/ice_ocean.F
M      trunk/models/ice/csim4/source/ice_prescribed_mod.F90
M      trunk/models/ice/csim4/source/ice_flux_in.F
M      trunk/models/ice/csim4/source/ice_mechred.F
M      trunk/models/ice/csim4/source/ice_diagnostics.F
M      trunk/models/ice/csim4/source/ice_therm_vertical.F
M      trunk/models/ice/csim4/source/ice_therm_itd.F
M      trunk/models/ice/csim4/source/ice_coupling.F
M      trunk/models/ice/csim4/source/ice_read_write.F
M      trunk/models/ice/csim4/source/ice_grid.F
M      trunk/models/ice/csim4/source/ice_atmo.F
M      trunk/models/ice/csim4/source/ice_history.F
M      trunk/models/ice/csim4/source/ice_init.F
M      trunk/models/ice/csim4/source/ice_dyn_evp.F
M      trunk/models/ice/csim4/bld/Macros.AIX
M      trunk/docs/ChangeLog

===============================================================
===============================================================

csim5_2_2
Originator: mvr (Mathew Rothstein)
Date:  051212 
Model: CSIM
Version: CSIM5.2.2
One-line Summary: moved some top-level csim4 files into its docs 
                  directory to ensure they'll be included with 
                  external pulls to ccsm tags

CCSM Version compatable with: 
Changes made:

   D /csim4/trunk/ChangeLog
   D /csim4/trunk/ChangeSum
   D /csim4/trunk/Copyright
   D /csim4/trunk/README
   A /csim4/trunk/docs/ChangeLog (from /csim4/trunk/ChangeLog:47)
   A /csim4/trunk/docs/ChangeSum (from /csim4/trunk/ChangeSum:47)
   A /csim4/trunk/docs/Copyright (from /csim4/trunk/Copyright:47)
   A /csim4/trunk/docs/README (from /csim4/trunk/README:47)

===============================================================
===============================================================

csim5_2_1
Originator: tcraig ( Anthony Craig)
Date: Tue Dec  6 11:39:26 MST 2005
Model: CSIM
Version: CSIM5.2.1
One-line Summary: tag for migration to subversion, trivial bfb change vs csim5_2_0
CCSM Version compatable with: 
Changes made:

Tagged for migration to subversion.
trivial change to ice_prescribed_mod.F90 for use statement

===============================================================
===============================================================

csim5_2_0
Originator: schramm ( Julie Schramm)
Date: Wed Jul 13 14:46:41 MDT 2005
Model: CSIM
Version: CSIM5.2.0
One-line Summary: Added new prescribed ice model that uses dx7 share code
CCSM Version compatable with: ccsm3_0_brnchT_bgc13
Changes made:

ice_prescribed_mod.F90 - added new prescribed ice module that uses dx7
                         share code.  Data cycling and remapping are
                         available.

ice_prescribed.F - Old prescribed ice module deleted

ice.F, ice_init.F, ice_therm_vertical.F - Minor modifications for
                                          prescribed ice model

ice_coupling.F, ice_diagnostics.F, ice_dyn_evp.F, ice_grid.F, ice_history.F - 
          TLAT, TLON, ULAT, ULON are now in degrees instead of radians

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim5_1_0
Originator: schramm ( Julie Schramm)
Date: Tue Apr 26 14:02:10 MDT 2005
Model: CSIM
Version: CSIM5.1.0
One-line Summary: New coupler interface, data cycling in prescribed ice model.
CCSM Version compatable with: ccsm3_0_1_beta03
Changes made:

ice.F - Updated copyright, calls to prescribed ice changed since
       data cycling was added

ice_coupling.F - Interface changed to increase flexibility in
                 swapping number of tracers exchanged with the coupler.

ice_history.F - bug fix.  Replaced aa(i,j,n_frz_onset) = mlt_onset(i,j)
                              with aa(i,j,n_frz_onset) = frz_onset(i,j)

ice_init.F - modifications to namelist for prescribed ice model

ice_itd.F, ice_itd_linear.F:

Changed dimensions of donor, daice, and dvice from (ncat-1) to (ncat),
so code will compile when ncat = 1.  Modified do loop indices where these
arrays are initialized from 1,ncat-1 to 1,ncat.

ice_mpi_internal.F - subroutine ice_bcast_ivector added to broadcast
                     encoded date

ice_prescribed.F - data cycling capability added

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim5_0_5
Originator: schramm ( Julie Schramm)
Date: Thu Jan 20 09:38:26 MST 2005
Model: CSIM
Version: CSIM5.0.5
One-line Summary: Cray directives modified, order of a loop modified for Cray
CCSM Version compatable with:ccsm3_0_1_beta03 
Changes made:

This tag is for a CCSM beta release.  It has not been thoroughly tested or
undergone full scientific validation on the Cray.

ice_flux_in.F - Bug fix: changed int_kind to real_kind for real variable daymid.

All occurrences of the Cray directive  cdir$ ivdep  were replaced
with !DIR$ CONCURRENT, giving the compiler the best chance of generating
optimal code.

ice_transport_remap.F - Loops were switched in the initialization routine to
make code vector-friendly.  Loop switch is answer-changing because of roundoff
differences.  These differences did not appear in the standard exact restart
test.  10 day run was bfb with previous tag.

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim5_0_4
Originator: schramm ( Julie Schramm)
Date: Mon Oct 25 09:33:57 MDT 2004
Model: CSIM
Version: CSIM5.0.4
One-line Summary: Bug fixes in ice_mechred.F and ice_therm_vertical.F
CCSM Version compatable with: ccsm3_0_beta17 
Changes made:

Bug in ice_therm_vertical.F: k in qin(i,j,k) = qin(i,j,k) not defined

Bug in ice_mechred.F: do nc = 1,ncat moved outside compiler directives.

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim5_0_3
Originator: schramm ( Julie Schramm)
Date: Thu Sep  2 11:22:51 MDT 2004
Model: CSIM
Version: CSIM5.0.3
One-line Summary: Mods for F configuration, vectorized ice_mechred.F with bug fix, mods to docs.
CCSM Version compatable with: ccsm3_0_beta17
Changes made:

Added CCSM3.0 copyright.
Updated User's Guide for uncoupled CSIM with atmospheric forcing.
Added Bill Lipscomb's mods to Reference Guide.

ice_init.F:  Added mods to uncoupled ice model scripts for atmos forcing.

ice_mechred.F is vectorized, and includes bug fix.

Added mods for prescribed ice model fix to:
  ice_diagnostics.F
  ice_prescribed.F
  ice_therm_vertical.F

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim5_0_2
Originator: schramm ( Julie Schramm)
Date: Wed Jun  2 14:30:43 MDT 2004
Model: CSIM
Version: CSIM5.0.2
One-line Summary: Conservation error: vice, add_new_ice fixed.
CCSM Version compatable with: ccsm3_0_beta17
Changes made:

ice_therm_itd.F, ice_itd_linear.F:  Tolerance in all calls to
column_conservation_check increased from puny (1.e-13) to eps11
(1.e-11) to avoid this error:

   3: Conservation error: vice, add_new_ice
   3: 1 : 37 100
   3: Initial value = 0.642393977370059432
   3: Final value = 0.642393977369959401
   3: Difference = -0.100031094518726604E-12

In ice_therm_itd.F, vi0new is only added to vice_init if it is
larger than puny.

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim5_0_1
Originator: schramm ( Julie Schramm)
Date: Thu May 20 15:56:56 MDT 2004
Model: CSIM
Version: CSIM5.0.1
One-line Summary: Frozen code for CCSM3 release
CCSM Version compatable with: ccsm3_0_beta17
Changes made:

User's Guide and Code Reference updated for CSIM5 and CCSM3.0 release.

Uncoupled CSIM scripts modified for default case in documentation.

ice.F             - Updated copyright date.

ice_diagnostics.F - removed unnecessary 'use ice_coupling'

ice_history.F     - bug fix in writing thickness category limits to
                    history file, corrected comment after frz_onset

ice_exit.F, ice_init.F -  Replaced nu_diag with 6, since nu_diag may be
                          used before the various processors know what it is.

ice_itd.F         - bug fixed in column_conservation check, now taking abs value
                    of the difference, not each quantity

ice_itd_linear.F - Made changes suggested by Cliff to avoid nonzero floating
                   point problem.  Removed vetamax and vetamin working arrays
                   and went back to original etamax/etamin scalars.

ice_transport_remap.F - Simplified init_remap to reduce difficulties for
                        compiler.  Answers change slightly due to different
                        order of operations in computing geometric quantities.

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim5_0_0
Originator: schramm ( Julie Schramm)
Date: Fri Apr  2 13:32:35 MST 2004
Model: CSIM
Version: CSIM5.0.0
One-line Summary: CICE-CSIM merged, vectorized code.
CCSM Version compatable with: ccsm3_0_beta17
Changes made:

This is the vectorized code from the csim4_8_16_brnchT_vector6
branch.  Some mods made to clean up output to log file.

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_8_17
Originator: schramm ( Julie Schramm)
Date: Fri Jan 23 10:31:20 MST 2004
Model: CSIM
Version: CSIM4.8.17
One-line Summary: char_len_long increased to 256, stops removed from ice_transport_remap.F
CCSM Version compatable with: ccsm3_0_beta08
Changes made:

ice_kinds_mod.F : char_len_long increased from 128 to 256 to
accommodate long case names

ice_trasnport_remap.F : stops replaced with shr_sys_abort

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_8_16
Originator: schramm ( Julie Schramm)
Date: Fri Dec  5 10:21:14 MST 2003
Model: CSIM
Version: CSIM4.8.16
One-line Summary: Fixed bug in ice_history.F.
CCSM Version compatable with: ccsm3_0_beta08
Changes made:

The array dimension in the conversion factors (cona) was off by
one after Tref.  This bug fix will affect the following fields
in the history file:

Qref, now in g/kg
growb, frazil, meltl, Fsalt_aice, Fresh_aice, opening, and daidtd


See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_8_15
Originator: tcraig ( Anthony Craig)
Date: Fri Oct 31 09:33:09 MST 2003
Model: CSIM
Version: CSIM4.8.15
One-line Summary: Change default ahmax
CCSM Version compatable with: 
Changes made:

Changed
  ice_albedo.F

Change ahmax in ice_albedo.F from 1.0 to 0.5.
Script mods will be implemented as well to setup the default
  albedo values.

===============================================================
===============================================================

csim4_8_14
Originator: tcraig ( Anthony Craig)
Date: Fri Oct 24 21:12:07 MDT 2003
Model: CSIM
Version: CSIM4.8.14
One-line Summary: Move albedos to namelist
CCSM Version compatable with: 
Changes made:

Changed 
  ice_albedo.F
  ice_init.F

Change albicev, albicei, albsnowv, albsnowi to namelist inputs.
changed them from parameters to real scalars in ice_albedo.
made changes in ice_init to make them namelist inputs including
adding them to the namelist list, setting defaults in ice_init,
broadcasting the value after namelist read, and printing info.

Remove mss_* namelist inputs from ice_init.

bit-for-bit change
Tested on blackforest, B configuration, 10 day, info_dbug=2 in cpl

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_8_13
Originator: schramm ( Julie Schramm)
Date: Thu Oct 16 09:46:51 MDT 2003
Model: CSIM
Version: CSIM4.8.13
One-line Summary: Mods added for standalone ice model
CCSM Version compatable with:ccsm2_1_beta18
Changes made:

Scripts and other mods for the standalone ice
model were added.
It is bit for bit with csim4_8_12 and restarts exactly.
The branch for code merging and vectorization will
start from this tag.

Files removed (never were or no longer are used):

csim4/rst/cpl.restart_file
csim4/rst/ice.restart_file
csim4/rst/ocn.restart_file
csim4/src/AIX.defs
csim4/src/Depends
csim4/src/GNUmakefile
csim4/src/Makedepends.pl
csim4/src/Objects
csim4/src/Sources
csim4/src/input_templates/AIX.defs
csim4/src/input_templates/AIX.defsorg
csim4/src/input_templates/GNUmakefile
csim4/src/input_templates/ice_in
csim4/src/input_templates/IRIX64.defs
csim4/src/input_templates/Makedepends.pl


Files added:

Directory bld added:
     Contains Macros and make files for standalone
     ice model

csim_run:
     Run script for the standalone ice model

csim.setup.csh:
     Setup script for the standalone ice model

Files modified:

ice.F:
    "call init_getflux" and "call getflux" commented
     out for the default standalone ice model

ice_calendar.F, ice_init.F:
     Namelist option dumpfreq_n added to allow more
     flexibility in the frequency at which restart
     files will be written out

ice_constants.F:
     c12 and c365 added for standalone ice model forcing

ice_read_write.F, ice_grid.F, ice_history.F:
     Logical variable diag added as in CICE so that
     diagnostics in subroutine ice_read can be turned
     off in ice_flux_in.F

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_8_12
Originator: schramm ( Julie Schramm)
Date: Wed Aug 27 16:06:58 MDT 2003
Model: CSIM
Version: CSIM4.8.12
One-line Summary: Dry snow albedos increased by 0.03 for IPCC runs.
CCSM Version compatable with: ccsm2_1_beta18 
Changes made:

in ice_albedo.F:

<      &,  albsnowv = 0.93_dbl_kind  ! cold snow albedo, visible
<      &,  albsnowi = 0.65_dbl_kind  ! cold snow albedo, near IR
---
>      &,  albsnowv = 0.96_dbl_kind  ! cold snow albedo, visible
>      &,  albsnowi = 0.68_dbl_kind  ! cold snow albedo, near IR

 
See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_8_11
Originator: schramm ( Julie Schramm)
Date: Wed Aug 20 13:43:55 MDT 2003
Model: CSIM
Version: CSIM4.8.11
One-line Summary: Reduced snow albedo 0.05, bare ice albedo by 0.02 for IPCC experiments.
CCSM Version compatable with: 
Changes made:

Snow and bare ice albedos reduced in ice_albedo.F to tune for
IPCC experiments.

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_8_10
Originator: schramm ( Julie Schramm)
Date: Thu Jul 31 13:02:13 MDT 2003
Model: CSIM
Version: CSIM4.8.10
One-line Summary: Tuning albedo and snow on ridged ice for IPCC runs.
CCSM Version compatable with:ccsm2_1_beta18 
Changes made:

ice_albedo.F : Bare ice albedo reduced.
ice_mechred.F: Snow on ridged ice is now put into ocean.
Modified ice.setup.csh to set snow_into_ocn to .true.


See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_8_9
Originator: schramm ( Julie Schramm)
Date: Fri Jul 18 13:07:45 MDT 2003
Model: CSIM
Version: CSIM4.8.9
One-line Summary: Added dynamics timestep to get around a model instability that typically manifests itself in mpdata.
CCSM Version compatable with: ccsm2_1_beta18 
Changes made:

Changes answers:  bfb if ndyn_dt=1,  negligible climate change if ndyn_dt=2

Exact restart: YES


CHANGES TO CODE, INPUT/OUTPUT FILES, OR DOCUMENTATION:
------------------------------------------------------

Modules modified:

 ice.F          : A loop was added around the calls to evp, transport
                  schemes, and mechanical redistribution to reduce the
                  dynamics timestep.
 ice_calendar.F : ndyn_dt and dyn_dt declared
                  dyn_dt = dt/ndyn_dt is the timestep for the dynamics.
                  ndyn_dt is the number of iterations for the loop
 ice_dyn_evp.F  : dt changed to dyn_dt
 ice_init.F     :  ndyn_dt added to namelist
 ice_mechred.F  : dt changed to dyn_dt
 ice_transport_mpdata.F : dt changed to dyn_dt
 ice_transport_remap.F  : dt changed to dyn_dt

Did the restart files change? NO

Did any input data files change? NO

Did the code modifications require changes in the setup script? YES
  ndyn_dt was added to the namelist

Does the documentation (User's Guide, Science Guide, Code Reference)
need to be updated due to these changes?
  Yes, but it has not been updated in the CVS repository.

TESTING:
--------

  Platforms tested: IBM
  Machine names   : Blackforest
  CCSM Configuration(s): M
  Grid            : gx1v3_T42
  Number of PES for ice model: 8

Tests performed:

  Description: Code is BFB with csim4_8_8 if ndyn_dt = 1
  Length of test: 10 day

  Description: Restarts exactly if ndyn_dt = 2, u, v look very similar to
               those in  test with ndyn=1
  Length of test: 10 day

  Description: A longer run is in progress with ndyn = 2 to look at affect of
               this on the climate. Case is Mb18.idyn_dt.  Will be
               compared to Mb18.20lyrs. At 6 months, monthly averaged
               fields are practically identical, but instantaneous fields
               (sig1, sig2) are different.  sig2 has a Min of -6.537 for
               ndyn_dt=1, Min of -18.389 for ndyn_dt=2.  Takes about an
               hour to run a month.
  Length of test: 5 years

PERFORMANCE:
-----------

For ndyn_dt=2, overall ice model time increases by a factor of 1.5.
The following timing calls increased by a factor of 2 (for 10 days):

Timer number  0  Total    =   828.01 sec |  Timer number  0  Total    =  1279.17 sec
Timer number  1  TimeLoop =   739.17 sec |  Timer number  1  TimeLoop =  1187.26 sec
Timer number  2  Dynamics =   182.87 sec |  Timer number  2  Dynamics =   365.67 sec
Timer number  3  Advectn  =   234.22 sec |  Timer number  3  Advectn  =   466.55 sec
Timer number  6  Ridging  =     4.23 sec |  Timer number  6  Ridging  =     8.35 sec
Timer number  9  ReadWrit =    33.74 sec |  Timer number  9  ReadWrit =    65.63 sec
Timer number 10  Bound    =   110.64 sec |  Timer number 10  Bound    =   214.40 sec
Timer number 14  Snd->Rcv =   485.46 sec |  Timer number 14  Snd->Rcv =   939.10 sec


SCIENTIFIC VALIDATION:
----------------------

5 year test is in progress, see above. Output be at:

/SCHRAMM/csm/Mb18.idyn_dt

This will be compared to

/SCHRAMM/csm/Mb18.20lyrs


See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_8_8
Originator: schramm ( Julie Schramm)
Date: Fri Jul 11 14:23:08 MDT 2003
Model: CSIM
Version: CSIM4.8.8
One-line Summary: Each ice thickness category has 4 thickness layers.
CCSM Version compatable with: ccsm2_1_beta18
Changes made:

nmax and nilay(nc) have been replaced with nilyr.
ntilay is unaffected in the source code.  All
ice_model_size* files have been modified as well
as the following:

 ice.F
 ice_dh.F
 ice_diagnostics.F
 ice_init.F
 ice_itd.F
 ice_itd_linear.F
 ice_mechred.F
 ice_model_size.F
 ice_prescribed.F
 ice_state.F
 ice_therm_driver.F
 ice_transport_remap.F
 ice_tstm.F
 ice_vthermo.F

New restart files have been created to change eicen from 16 to 20
layers.  ice.setup.csh has been modified to read these files.

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_8_7
Originator: schramm ( Julie Schramm)
Date: Wed Jul  2 11:03:07 MDT 2003
Model: CSIM
Version: CSIM4.8.7
One-line Summary: Added ice file units module and minor changes for future standalone ice model.
CCSM Version compatable with: ccsm2_1_beta18
Changes made:

This tag is bfb with csim4_8_6.  Added ice_fileunits.F module
for assigning file units and minor changes for future standalone
ice model.  Restarts exactly.  Files affected by ice_fileunits.F:

ice_calendar.F
ice_coupling.F
ice_dh.F
ice_diagnostics.F
ice_dyn_evp.F
ice_grid.F
ice_history.F
ice_init.F
ice_itd.F
ice_itd_linear.F
ice_mpi_internal.F
ice_ocean.F
ice_prescribed.F
ice_prnpnt.F
ice_read_write.F
ice_therm_driver.F
ice_timers.F
ice_transport_mpdata.F
ice_transport_remap.F
ice_tstm.F

Removed files:

src/AIX.defs
src/Depends
src/GNUmakefile
src/Makedepends.pl
src/Objects
src/Sources

Files affected by mods for standalone ice model:

ice.F  : Added call to getflux, moved calls to diags_cpl_in and
         diags_cpl_out from ice_coupling.F so they work when
         the coupler isn't used.  "use ice_flux_in" is added but
         commented out for now.  Put #if coupled ... #endif around
         use cpl_* statements.

ice_init.F:  local_start(1,1) and local_start(2,1) set to 1 if
             -D_MPI is not used.

ice_mpi_internal.F - declaration of local_start moved outside of
                 #ifdef _MPI.  local_start(1,1), local_start(2,1)
                 were not defined when -D_MPI is not used.  These
                 are used in ice_prnpnt.F.

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_8_6
Originator: schramm ( Julie Schramm)
Date: Thu May  1 17:05:57 MDT 2003
Model: CSIM
Version: CSIM4.8.6
One-line Summary: Deleted OMP directives
CCSM Version compatable with: ccsm2_1_beta14
Changes made:

Old OMP directives existed in:
ice_transport_mpdata.F
ice_mpi_internal.F
ice_itd.F
ice_init.F
ice_grid.F
ice_dyn_evp.F

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_8_5
Originator: schramm ( Julie Schramm)
Date: Wed Apr 30 16:08:32 MDT 2003
Model: CSIM
Version: CSIM4.8.5
One-line Summary: Sea ice momentum equation modified for free drift regime.
CCSM Version compatable with: ccsm2_1_beta14
Changes made:

ice_dyn_evp.F - Sea ice momentum equation modified to better simulate
ice behavior in areas with low ice concentration.  See:

Hunke, E. C., and J. K. Dukowicz (2003).
The sea ice momentum equation in the free drift regime.
Los Alamos Tech. Rep. LA-UR-03-2219.
 
See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_8_4
Originator: schramm ( Julie Schramm)
Date: Wed Apr 23 08:48:29 MDT 2003
Model: CSIM
Version: CSIM4.8.4
One-line Summary: Fixed bug in ice_read_write.F where hit_eof was used when it didn't exist.
CCSM Version compatable with: ccsm2_1_beta14 
Changes made:

Modified ice_read_write.F so that hit_oef is used only if it is 
present.

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_8_3
Originator: schramm ( Julie Schramm)
Date: Wed Apr  9 13:53:04 MDT 2003
Model: CSIM
Version: CSIM4.8.3
One-line Summary: Modified calculation of Tref; added calculation of Qref
CCSM Version compatable with: ccsm2_1_beta14
Changes made:

Modified ice/atm flux calculation to make it
consistent with what is calculated by the coupler
for atm/ocean fluxes.  Tref calculation modified,
Qref calculation added.

ice_atmo.F  - modified calculation of Tref so that
              it is consistent with that calculated
              in cpl_flux_mod.F90; added Qrf
ice_coupling.F - passing Qref to coupler
ice_diagnostics.F - writes out Qref in print_state
ice_flux.F - added Qref and Qrefn
ice_history.F - write out Qref to history file
ice_ocean.F - added Qrf as a dummy variable
ice_therm_driver.F - added Qref
ice_vthermo.F - added Qref and Qrefn

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_8_2
Originator: schramm ( Julie Schramm)
Date: Mon Apr  7 11:06:26 MDT 2003
Model: CSIM
Version: CSIM4.8.2
One-line Summary: Added salt flux calculation
CCSM Version compatable with: ccsm2_1_beta13 
Changes made:

Testing:

M config (zero ice salinity) - exact restart, bfb (arwt tot mass chng and
           water flux error in log file don't match due to different
           calculations of totmn and totms), code works if ice reference
           salinity is zero

M config (non-zero ice salinity) - exact restart, salt is conserved
           in ice model, runs with DEBUG=TRUE

B config (non-zero ice salinity) - exact restart, salt is
           conserved in ice and ocean models, salt is conserved
           from ice(hourly)->cpl->ocn(once per day).

Added salt flux calculations so the ice reference salinity could
be changed from 0 to a non-zero value in the share constants and
the ice model can send a non-zero salt flux to the ocean.

ice_diagnostics.F - added hemispheric salt mass and flux budget information
ice_flux.F        - added variable for salt flux to ocean
ice_history.F     - writes out salt flux to history file, reads in and
                    writes out salt flux to restart file, salt flux
                    set to zero if it is not in the restart file
ice_mechred.F     - bug fix to make the snow transfer process preserve
                    the ratio of snow depth and ice thickness during
                    mechanical redistribution
ice_read_write.F  - added optional variables to ice_read subroutine
                    to read in salt flux if it is in the restart file,
                    allows backward compatibility with restart files.
ice_scaling.F     - divide salt flux by ice area before sending it to
                    coupler
ice_therm_driver.F - add ice melt water to the salt flux for lateral
                     melt, added diagnostic and history info
ice_vthermo.F      - add brine rejection/ice melt/snow flooding to
                     the salt flux for each category, add salt flux
                     to call to subroutine merge_fluxes

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_8_1
Originator: schramm ( Julie Schramm)
Date: Mon Mar 31 14:00:43 MST 2003
Model: CSIM
Version: CSIM4.8.1
One-line Summary: Bug fixes in ice_ocean.F; added open water advection to incremental reampping. 
CCSM Version compatible with: ccsm2_1_beta13
Changes made: 

ice_atmo.F, ice_ocean.F, ice_vthermo.F:

Fixed Lsub/Lvap bug, now pass in surface type to subroutine
stability, so Lsub is used for ice and Lvap is used for water.

ice_ocean.F:

Included Fswthru in calculation of SST.

ice_transport_remap.F:

Added advection of open water to incremental remapping.

ice_itd_linear.F:
   Added new logical variable (l_shift) to help this subroutine
   abort gracefully.  In rare cases where remapping fails, skip
   the shift_ice subroutine and allow rebin to move ice
   between categories if necessary.


See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_8_0
Originator: schramm ( Julie Schramm)
Date: Mon Mar 17 15:00:53 MST 2003
Model: CSIM
Version: CSIM4.8.0
One-line Summary: Merged branch with cpl6 mods onto trunk.
CCSM Version compatable with:ccsm2_1_beta13 
Changes made:

Merged branch (csim4_7_0_brnch_cpl6_7) with cpl6 mods onto main
trunk (csim4_7_1).  Modified albedo fix for thin, bare, melting
ice to use 'max' instead of 'if' for efficiency.  Files modified:

ice_albedo.F
ice_constants.F
ice_coupling.F
ice_grid.F
ice_history.F
ice_init.F
ice_timers.F


See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_7_1
Originator: schramm ( Julie Schramm)
Date: Thu Mar  6 16:51:25 MST 2003
Model: CSIM
Version: CSIM4.7.1
One-line Summary: Fixed bug in ice_albedo.F
CCSM Version compatable with:ccsm2_0_beta65 
Changes made:

Albedos for thin, bare, melting ice were becoming negative.
Reset albedos less than the ocean albedo to that value.  A
5 day initial run was bfb with csim4_7_0. Can't guarantee that
longer runs will be bfb.

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_7_0
Originator: schramm ( Julie Schramm)
Date: Tue Jan 14 09:53:11 MST 2003
Model: CSIM
Version: CSIM4.7.0
One-line Summary: Incremental remapping added
CCSM Version compatable with:ccsm2_0_beta58 
Changes made:

Testing:

MPDATA bfb with previous tag csim4_6_18
MPDATA restarts exactly
remap restarts exactly
remap works with debugger on

Mods to input_templates:

ice_model_size*.F - nmax changed from 10 to 4

Mods to source:  Incremental remapping added

ice.F            - new use statements, new calls to remapping
ice_constants.F  - added 4 constants used by remapping
ice_grid.F       - added HTS and HTW; increased size of dxhy and dyhx
ice_init.F       - changed a use statement
ice_model_size.F - changed nmax from 10 to 4. 
ice_transport.F  - removed
ice_transport_mpdata.F - same as the old ice_transport.F, but with a new name
ice_transport_remap.F  - the new incremental remapping module
ice_tstm.F       - nmax changed to nmax+2 to account for nmax changing from
                   10 to 4 in the ice_model_size.F* files

Documentation mods:

ice_nml_var.tex   - added 'remap' as an advection option
ice_quick_start.tex - added task geometry info for prescribed ice model
ice_troubleshoot.tex - added section on MPDATA transport unstable
                     - added section on NX not dividing evenly into grid

               
See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_6_18
Originator: schramm ( Julie Schramm)
Date: Wed Aug 28 11:13:05 MDT 2002
Model: CSIM
Version: CSIM4.6.18
One-line Summary: Updated User's Guide for CCSM2.0.1 release
CCSM Version compatable with: 
Changes made:

Updated User's Guide for new prescribed ice model datasets, paleoclimate
gx3v4 configuration and new input datasets for data models.

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_6_17
Originator: schramm ( Julie Schramm)
Date: Thu Jul 25 16:19:28 MDT 2002
Model: CSIM
Version: CSIM4.6.17
One-line Summary: Bug fix in ice_itd.F, added units check for ice
 concentration data in prescribed ice model.
CCSM Version compatable with: ccsm2_0_beta49 
Changes made:

ice_itd.F   write (6,*) '' For some reason (probably compiler bug) this
causes a failure on the PGI compilers version 3.2-4. The ice model halts
with an I/O (permission denied) error to the output file, due to a null
string.

ice_prescribed.F   If ice concentration is in percent, prescribed ice 
model will set all values > 1 back to 1 and all values < 0 to 0, and run.
Put in a check to make sure ice concentration units are in fraction, if
not, model will abort. 

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_6_16
Originator: schramm ( Julie Schramm)
Date: Fri Jun  7 10:56:41 MDT 2002
Model: CSIM
Version: CSIM4.6.16
One-line Summary: Copyright agreement added, some calls to ice_timer commented out to improve performance.
CCSM Version compatable with:ccsm2_0_beta47 
Changes made:

The copyright agreement was added to ice.F.

Calls to ice_timer_start(5), ice_timer_stop(5) (thermo) and
ice_timer_start(7), ice_timer_stop(7) (category conversions) were
commented out in ice_therm_driver.F to improve performance.  This
decreased the time spent in 'column' by half:  57.6 sec to 28.7 sec
for a 10 day run.  The character strings in ice_timers.F corresponding
to these calls were replaced with spaces.

Using pdflatex to create pdf versions of the User's Guide and the
Reference Guide to make the files more readable on the screen and searchable.


See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_6_15
Originator: schramm ( Julie Schramm)
Date: Mon May 13 10:50:16 MDT 2002
Model: CSIM
Version: CSIM4.6.15
One-line Summary: Final changes to CSIM4 User's Guide
CCSM Version compatable with:ccsm2_0_beta45 
Changes made:
 
Mods made to all files in /docs/UsersGuide.       

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_6_14
Originator: schramm ( Julie Schramm)
Date: Tue Apr 30 10:28:35 MDT 2002
Model: CSIM
Version: CSIM4.6.14
One-line Summary: Modified output to history files, modified kdyn=0 case, added code reference and scientific document.
CCSM Version compatable with:ccsm2_0_beta41 
Changes made:

B config bfb with beta40
F config bfb with beta41

ice.F - modified so that kdyn=0 case works.  Added an if (kdyn=1)....endif
        around call evp, call transport, and call mech_red.  This gives
        answers to within roundoff compared to setting u and v to 0 after
        the restart file is read in in ice_history.F.   Modified user's
        guide to include this case.

ice_history.F - modified to include 9 new fields that have been multiplied
                by ice area to represent what affects the ice, not what is
                exchanged with the coupler.

ice.setup.csh - modified to eliminate fields in the history file where the
                entire field is not known by the ice model.  To increase
                model performance, only information on the part of the grid
                with ice is sent/recv to/from coupler.  Entire field was
                written to history file, even where information is not known.
                These fields have been removed from the history file via the
                namelist options.

Code Reference Guide added.
Scientific Document added.

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_6_13
Originator: schramm ( Julie Schramm)
Date: Mon Apr 15 09:02:29 MDT 2002
Model: CSIM
Version: CSIM4.6.13
One-line Summary: Added ProTeX to source code.
CCSM Version compatable with: ccsm2_0_beta41 
Changes made:

Added ProTeX to source code.  All *.F files modified.

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_6_12
Originator: schramm ( Julie Schramm)
Date: Fri Apr  5 08:32:01 MST 2002
Model: CSIM
Version: CSIM4.6.12
One-line Summary: Improved performance for OML model and prescribed ice model,
other minor fixes for consistency with User's Guide.
CCSM Version compatable with: ccsm2_0_beta40
 
Changes made:

o This tag is bit for bit with ccsm2_0_beta40 for the B configuration
o B configuration exactly restarts on gx1v3 grid.
o F configuration exactly restarts on gx3 grid.

o User's Guide update with recent revisions.

o Added ice_model_size.F.100x110.1 and ice_model_size.F.320x384.1 for
  running slab (single thickness category) ice model.

o Changed ntilay in ice_model_size.F.320x384x10 and ice_model_size.F.320x384x3
  to correct values.

o ice.setup.csh removed hist_to_mss and rst_to_mss

ice.F:
o Had to pass oceanmixed_ice into init_grid and popgrid.  This
  was to avoid a bug caused when adding 'use ice_ocean' directly
  into subroutine popgrid.  This is not an elegant way around this
  problem and will have to be re-examined in the future.

ice_coupling.F:
o pmask and rmask added to reduce amount of information being passed
  to the coupler for prescribed ice and OML runs.  Buffer being sent
  to the coupler is now packed.  Previously, values of eps12 for ice
  area were being sent to trick the coupler into sending data on the
  entire grid.

ice_grid.F:
o Mods to mask data so that data north of -40 lat and south of 35 lat is
  not sent to coupler for OML runs.  NOTE:  This will cause  problems
  when simulating a snowball earth.  This problem needs to be revisited.
  Model should stop if ice cover exceeds a certain area.

ice_history.F:
o Removed hist_to_mss and rst_to_mss.  $MSSDIR set in the main setup
  script will control when data is written to MSS. Tested 04/04/02.

ice_init.F
o Removed hist_to_mss and rst_to_mss.  Default of diagfreq changed from 0
  to 24.

ice_ocean.F
o Added Marika's bug fixes.  Fhnet should be multiplied by aice when calculating
  sst.

ice_prescribed.F
o Mods to read in a third date to determine where ice will be.  Info in grid
  cells where ice will be in next timestep will be exchanged with coupler.
  This is used to pack the buffer and speed up the prescribed ice model.
      

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_6_11
Originator: schramm ( Julie Schramm)
Date: Tue Mar 26 15:58:49 MST 2002
Model: CSIM
Version: CSIM4.6.11
One-line Summary: Draft of User's Guide added, ice thermo performance 2x better, misc bug fixes.
CCSM Version compatable with: ccsm2_0_beta40 
Changes made:

o This tag is bit for bit with ccsm2_0_beta40
o Exact restart test passed for D config, on gx3 grid

The following changes were made:

A /docs directory was added that includes subdirectories for
scientific documentation, reference guide, and user's guide.
The latex code for the user's guide has been included with
this version.

ice.F:
o shr_msg_mod was split into 2 subroutines to allow for all tasks
  changing to cwd, but only master task redirecting to stdio

ice_coupling.F:
o There was a bug in the cpl/ice diagnostics.  The numbers being
  reported by the ice model and the coupler didn't agree.  It
  looks like this problem resulted from the packing of the buffer.
  Changes were made to ice_coupling.F and msg_ice_mod.F90 to
  get the exchanged values to agree.

ice_history.F:
o Fixed typo in comment under netCDF variable Fresh

ice_ocean.F
o Fixed bug in ocean mixed layer calculation, cp_ocn should be
  cp_ocn*rhow

ice_tstm.F:
o Removed allocate and deallocate of arrays.  This speeds up the
  ice thermodynamics by a factor of 2.  These arrays are now declared
  using nmax, the maximum number of layers allowable in an ice thickness
  category.  This mod was tested alone and produces bit for bit results
  with beta 40 in the D (30 day run) and B (5 day run) configurations.


See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_6_10
Originator: schramm ( Julie Schramm)
Date: Fri Feb 22 15:15:09 MST 2002
Model: CSIM
Version: CSIM4.6.10
One-line Summary: Fixed an error in the time management.
CCSM Version compatable with: ccsm2_0_beta36
Changes made:

Modified ice_coupling.F, ice_init.F and ice_calendar.F.  The
incorrect time was being output to the netCDF history files.
Time was being set to zero for startup and hybrid runs.  Time
is now set from either the restart file, or from the BASEDATE
received from the coupler.  A call to shr_sys_abort was added
to ice_init.F in the case that NX*NY is not equal to the total
number of tasks.

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

csim4_6_9
Originator: schramm ( Julie Schramm)
Date: Tue Feb 12 11:36:06 MST 2002
Model: CSIM
Version: CSIM4.6.9
One-line Summary: Added mods to accommodate new runtypes.
CCSM Version compatable with: ccsm2_0_beta35
Changes made:

Modified ice_coupling.F to get BASEDATE from the coupler for startup and
hybrid runs.  Modified ice_init.F and ice_history.F to get new namelist
variable runtype.  Only D run works in this configuration, with mods to
the ice model script.  F run did not work.
       

See: 	http://www.cgd.ucar.edu/cgi-bin/csm/ncar_only/csim_change.cgi?ChangeLog
        for latest version of this file on the web.
===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Tue Jan  8 15:49:59 MST 2002
Model: CSIM
Version: CSIM4.6.8
One-line summary: Included CCSM filename conventions, update share
constants.

Changes made:
 
Tests completed (8 Jan 2002):

(1) Compiles and runs with debugger.
(2) T31_gx3: branch restart exact
         continue restart exact
(3) T42_gx1v3: branch restart exact
           continue restart exact
(4) Compiles and runs 3 days on LANL SGI.

Modifications:

All files:  Added CVS $Source and $Name keywords to the top of all source
            code files.

ice_history.F, ice_calendar.F, ice_init.F, ice.setup.csh:  Mods to include
            CCSM output filename conventions.

ice_prescribed.F: Changed ice thickness in NH from 1.5 to 2 m and from
                  0.5 m to 1 m in SH.

ice_constants.F:  Share constant denoting the triple point of water included.

ice_init.F:  Added a block of Elizabeth's code to check within the model
             for even division of # of pes in x and y.

ice.setup.csh:  Included check for exact division of NX and NY into grid.

===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Wed Nov 28 09:23:23 MST 2001
Model: CSIM
Version: CSIM4.6.7
One-line summary: netCDF files are CF compliant, share constants
included, string lengths for filenames increased, netCDF error codes 
checked, ULAT and ULON read in only once.

Changes made:

ice_itd.F     Saved ice thickness limits for categories in ice_itd.F,
              passed info to ice_history.F to write to netCDF file.

ice_history.F Added dxu, dyu, dxt, dyt, htn, hte, ULAT, ULON, ANGLE,
              and uarea to netCDF file. Changed variable names and
              attributes of some existing variables. Improved global
              attributes.  Increased lengths of strings restrt_file
              and runid. netCDF error codes checked.
ice_grid.F    ULAT and ULON read in twice. Removed read from subroutine
              Tlatlon. Wouldn't have worked with non-pop grid anyway.
              Made module arrays ULON_G and ULAT_G. Printed out to
              netCDF file.

ice_init.F    Added 'runid' to namelist to write out in global attributes.

ice_kinds_mod.F Added char_len_long to kinds.

ice_prescribed.F Increased lengths of character strings
                 prescribed_ice_file, title.

ice_constants.F  Share constants included.  Some constants changed in the
                 following files:
ice_atmo.F       zvir removed; uses share value in ice_constants.F
ice_calendar.F   moved secday to ice_constants.F, uses share value
ice_dyn_evp.F    7.292e-5 replaced by omega set in ice_constants.F
ice_ocean.F      cpw=4.19e6_dbl_kind deleted, uses share value set in ice_constants.F


===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Tue Nov 13 15:40:27 MST 2001
Model: CSIM
Version: CSIM4.6.6
One-line summary: Ice and ocean model exchanging vector fields on T grid.
Changes made:

ice_coupling.F:

Vector fields arriving from ocean model on T grid, but oriented
geographically.  Fields are first rotated to the POP grid using
ANGLET, then interpolated to the U grid.
===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Wed Nov  7 12:24:56 MST 2001
Model: CSIM
Version: CSIM4.6.5
One-line summary: Changed snowpatch to 0.02 in ice_albedo.F, updated 
scripts.

Changes made:
Updated ice script includes a more flexible ice grid decomp and
a check for even grid division.

===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Fri Nov  2 09:09:44 MST 2001
Model: CSIM
Version: CSIM4.6.4
One-line summary: Non-blocking features removed

Changes made:

Non-blocking features removed in ice_coupling.F.  Path and filenames
added to ice.setup.csh to allow for prescribed ice run on gx3 grid.
===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Mon Oct 29 15:33:05 MST 2001
Model: CSIM
Version: CSIM4.6.3
One-line summary: ANGLET calculation corrected, ice.log file clobbering
fixed, stop statements removed.

Changes made:

Tag csim4_6_3 is based on ccsm2_0_beta21 and includes :

o  Main setup script has been modified to include changes in
   beta21.  Setup script and sed script have been added to
   /models/ice/csim4 to insure that they will be included with
   any checkout.

o  'stop' statements changed to call shr_sys_abort.  Files modified:

   ice_coupling.F
   ice_dh.F
   ice_grid.F
   ice_history.F
   ice_init.F
   ice_itd.F
   ice_itd_linear.F
   ice_mechred.F
   ice_ocean.F
   ice_prescribed.F
   ice_transport.F
   ice_vthermo.F 

o  Ice.log file clobbering problem on SGI fixed, files were modified so
   only master_task opens and writes to ice.log.  Output to log file was
   also unordered on IBM.  Now, only master_task reads namelist info,
   then broadcasts it to other processors.  Files modified:

   ice.F               - only master_task opens unit 6
   ice_init.F          - namelist info broadcast
   ice_history.F       - namelist info broascast
   ice_mpi_internal.F  - Added 2 subroutines to broadcast logical and
                         character variables.  Bug fixed in ice_bcast_iscalar:
                         intent(in) => intent(inout) for ival.

o  ANGLET calculation modified , now agrees with ocean.  Files modified:

   ice_grid.F     - ANGLET calculated here
   ice_history.F  - changed name of ANGLET in ice history file


===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Thu Sep 27 16:24:58 MDT 2001
Model: CSIM
Version: CSIM4.6.2
One-line summary: Mods made to albedo parameterization to 
increase the albedo of dry snow. 
Changes made:

ice_albedo.F       : dT_mlt = 1.0, snowpatch = 0.001 and fh changed
                     to a tangential dependence, not linear.  
ice_therm_driver.F : Bug fix, sign of Fsid and Rside changed.
===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Thu Sep 27 15:19:45 MDT 2001
Model: CSIM
Version: CSIM4.6.1
One-line summary: Merge of csim4_6_0 with metric terms and 
csim4_5_4_brnch_gridfix1 with grid corrections.

Changes made:

ice_grid.F     : Tony added a mod to fix discontinuity in ANGLET.
ice_coupling.F : Marika make mods so variables exchanged between
                 ice and ocean models were on the u grid.
===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Thu Sep  6 13:17:18 MDT 2001
Model: CSIM
Version: CSIM4.6.0
One-line summary: Metric terms added
Changes made:

The following files were changed to include the metric terms:

ice.setup.csh    : Fixed typo in AMIP file name.
ice.F            : Added kstrength to evp call
ice_constants.F  : added constants for new evp code
ice_init.F       : added constants for new evp code (removed subroutine
                   with this change, since it wasn't used)
ice_itd_linear.F : added constants for new evp code
ice_prescribed.F : added constants for new evp code
ice_tstm.F       : added constants for new evp code
ice_dyn_evp.F    : new dynamics module
ice_grid.F       : added new arrays for evp, removed some arrays not used
ice_history.F    : changed dumpfile and restartfile to write/read the new
                   internall stress variables
ice_mechred.F    : variables shear and divu now reside in ice_dyn_evp.F,
                   and are computed there; removed shear and divu declarations
                   and simplified routing opening_closing.

===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Thu Aug 30 13:22:38 MDT 2001
Model: CSIM
Version: CSIM4.5.4
One-line summary: Saturation vapor terms added, other minor 
changes, all scripts have changed.

Changes made:

All component setup scritps and main scripts have been rewritten.

ice.setup.csh
      Copy and change name of ice.restart_file in /rst directory
      Added pop_frc_gx1v3.nc to inputdata.
      Changed pop_yr100_frc.nc to pop_frc_gx3.nc.
      Set oceanmixed_ice_sst_init to false for continue runs.
ice.F
      Combined subroutine init_prescribed_ice and init_prescribed_ice_clim.
ice_atmo.F
      Added saturation vapor pressure terms qqq and TTT.
ice_constants.F
      Added saturation vapor pressure terms qqq and TTT.
ice_coupling.F
      Changed swabs = sabs - Fswthru to swabs = sabs
      Changed write (*,*) to write (6,*), didn't fix ice.log clobbering problem.
ice_diagnostics.F
      Modified print_state.
ice_init.F
      Removed 2 unused subroutines, set_state and set_flux.
ice_itd.F
      Changed write (*,*) to write (6,*), didn't fix ice.log clobbering problem.
ice_mechred.F
      Changed write (*,*) to write (6,*), didn't fix ice.log clobbering problem.
ice_ocean.F
      Fixed multiple includes of mpif.h library.
      Added saturation vapor pressure terms qqq and TTT.
ice_prescribed.F
      Fixed multiple includes of mpif.h library.
      Combined subroutine init_prescribed_ice and init_prescribed_ice_clim.
ice_prnpnt.F
      Fixed multiple includes of mpif.h library.
ice_tstm.F
      Changed write (*,*) to write (6,*), didn't fix ice.log clobbering problem.
ice_vthermo.F
      Added saturation vapor pressure terms qqq and TTT.


===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Mon Jul 30 12:53:42 MDT 2001
Model: CSIM
Version: CSIM4.5.3
One-line summary: Ocean mixed layer model that reads POP forcing 
added, prescribed ice model cleaned up.

Changes made:

Mods made to:
ice.F
ice_coupling.F (bug fix to packed data, ocean mixed layer model 
                needed forcing data everywhere)
ice_diagnostics.F
ice_history.F
ice_init.F
ice_ocean.F
ice_prescribed.F
ice_therm_driver.F
ice.setup.csh

Not well tested.

===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Thu Jul 26 14:19:05 MDT 2001
Model: CSIM
Version: CSIM4.5.2
One-line summary: Memory leak fixed in ice_coupling.F, gx1v3 
grid options added to script files, bld, datm5, and dlnd5 updated.

Changes made:

Summary says it all.

===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Tue Jul 24 12:42:27 MDT 2001
Model: CSIM
Version: CSIM4.5.1
One-line summary: New coupler interface: ice model receives packed 
data from coupler to improve performance.
Changes made:

aio.tst00.init,
aio.tst00.cont - Dud has been eliminated A new task geometry has been
                 implemented.  The aio_sed_script no longer
aio_sed_script - No longer modifies the name of the restart file in the
                 coupler script.

ice.setup.csh  - Modified to include $CASE in ice restart pointer filename.
                 This is to keep the file from being clobbered when two
                 different case runs are done simultaneously.

ice_coupling.F - receives packed data from coupler

===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Fri Jul 13 15:37:22 MDT 2001
Model: CSIM
Version: CSIM4.5.0
One-line summary: Ice->cpl interface modified, performance 
improved, components updated.
Changes made:

Changes were made to the following files:

ice_coupling.F Added swabs to ice->cpl interface (SW abs in snow and ice)
               Change ice->cpl interface for performance
               Initialized TLAT_V and TLON_V

ice_timers.F   Timers added for coupling

ice_domain.F   Added global array index for local subdomain

ice_grid.F     Added loop using global array index 

Updated datm, latm, dlnd, cpl, docn to correspond to those of ccsm2_0_beta12

===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Thu Jul 12 14:36:37 MDT 2001
Model: CSIM
Version: CSIM4.4.5
One-line summary: A more accurate calculation of TLAT and 
TLON are included, along with some miscellaneous bug fixes.
Changes made:

Files modified were:

ice_prescribed.F
ice_mpi_internal.F
ice_coupling.F
ice_diagnostics.F
ice_grid.F
ice_therm_drive.F
ice_mechred.F


===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Fri May 25 14:22:38 MDT 2001
Model: CSIM
Version: CSIM4.4.4
One-line summary: Ice.F modified for exact restarts with the prescribed
ice model.
Changes made:

.not.prescribed_ice removed from if statements before call restartfile
and call dumpfile.
===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Wed May 23 09:38:38 MDT 2001
Model: CSIM
Version: CSIM4.4.3
One-line summary: Files modified to resolve a compilation problem on the SGI.
Changes made:

USE statements in ice.F, ice_coupling.F, ice_diagnostics.F, ice_history.F,
and ice_prescribed.F were modified so that mpif.h was included only once.

===============================================================
===============================================================

Originator: erik ( Erik Kluzek)
Date: Fri May 18 15:07:24 MDT 2001
Model: CSIM
Version: CSIM4.4.2
One-line summary: Let prescribed-ice use dates straight from the coupler
Changes made:

Rather than adding a offset year to the date from the coupler to
get the prescribed-ice dataset in sync with the coupler dates, just
use the dates from the coupler and on the file. If dates need to be 
changed do so directly on the datasets.

Files changed:

ice.F
ice_prescribed.F
ice.setup.csh

===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Mon May 16 15:04:39 MDT 2001
Model: CSIM
Version: CSIM4.4.1
One-line summary: Prescribed ice model included, FPE errors fixed, 
history and restart files can be written to MSS.

Changes made:

The following modifications were make to these files in csim4_4_1:
ice.setup.csh  Added namelist options to write history and restart files to MSS.
               Mods for presribed ice case.
ice.F          Added timing calls
               Mods for prescribed ice.
ice_coupling.F Receives info_dbug flag from coupler to write global sums.
               Mods to adjust initial date for prescribed ice case.
ice_history.F  Uninitialized variables were being referenced by processors
                 other than master_task, 7 occurrences in this file.
               Added iostat to namelist read statements.
               Added namelist options to write history and restart files to MSS.
ice_init.F     Fixed bounds problems with Tsfcn(i,j,nc)=Tf(i,j)
               Added iostat to namelist read statements.
               Added namelist options to write history and restart files to MSS.
               Set namelist variables to agreed upon default values.
               Added namelist parameters for presribed ice case.
ice_itd_linear.F    Initialized hL and hR to 0.
ice_mechred.F       Fixed bug in ice dynamics.
ice_mpi_internal.F  Added MPI_barrier call to allow model to run on 16 processor
s.
ice_prescribed.F    New file containing prescribed ice module.
ice_timers.F        Added timing calls.
ice_transport.F     Fixed bounds problems with Tsfcn(i,j,nc)=Tf(i,j)


===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Wed Mar 28 14:40:11 MST 2001
Model: CSIM
Version: CSIM4.4.0
One-line summary: Cleaned up mixed layer model, added C. Bitz's bug fixes and new SW physics.

Changes made:

This version of CSIM4 includes Elizabeth's cleaned up version of
the ocean mixed layer model.  Cecilia's bug fixes have been added
as well as a wavelength dependent io.  A flag has been added to
receive a write history file command from the coupler, although
this feature hasn't yet been implemented.  A problem with no
restart file being written on the last time step has been resolved.
The script files have been updated to be similar to those used by
CCSM.  The build files are now those used by CCSM.  These last two
changes have resulted in several changes in the directory structure.
This version of the model has not undergone extensive testing.

===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Fri Feb 23 14:21:01 MST 2001
Model: CSIM
Version: CSIM4.3.0
One-line summary: Contains Elizabeth's and Marika's bug fixes
						
Changes made:

This version of the ice model includes all of Elizabeth Hunke's bug
fixes, and Marika Holland's changes to the heat budget and exact restart
capability.  The model is capable of receiving a write_restart command
from the coupler.  Changes have been make to the share code by Tony
Craig.  Bruce Breigleb has included an ice thermo-only option and an
ocean mixed layer model.  The model has been run for 10 days on the gx1v2
grid.

===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Tue Jan 16 14:21:37 MST 2001
Model: CSIM
Version: CSIM4.2.0
One-line summary: This version contains a new coupler interface and new dummy models.

Changes made:

These files have been modified to accommodate changes in the ice
model and the dummy models.  The ice model now passes calculated grid
cell areas to the coupler.  The coupler sends individual fluxes to the
dummy ocean model instead of a net flux.  Bruce's changes to the dummy
atm model (rain -> snow conversion and a SW factor) are now incorporated
into the new version of datm5.  This version of the active only ice model,
as checked out, will run with docn5 instead of the mixed layer model, since
in it's current state, the mixed layer model is not compatible with the new
dummy ocean.  Due to time constraints with CCSM and the novelty of the
cleaned up ice code, this version of the ice model has undergone minimal
testing.

===============================================================
===============================================================

Originator: schramm ( SCHRAMM JULIE NONE CGD)
Date: Fri Dec 22 10:53:35 MST 2000
Model: CSIM
Version: CSIM4.1.0
One-line summary: 

csim4_1_0 is the preliminary cleaned-up	version of the ice model. 
It has been checked out and run on the IBM, and will restart from a 
restart file.

Changes made:

Elizabeth Hunke has cleaned up the ice model source code and has
converted it to F90 modules.  The option to use Bill Lipscomb's linear
remapping scheme is included in the code, but has not yet been tested.
Bug fixes will be included in the next release.  'Dud' model has been
included in ice_coupling.F.
===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Thu Nov  9 15:43:04 MST 2000
Model: CSIM
Version: CSIM4.0.1
One-line summary: 
This version of csim4 allows for the 'dud' model, a fake CPU consumer.

Changes made:

Put case ('dud') lines in coupling.F to allow for the 'dud' model,
which is a fake CPU consumer.
===============================================================
===============================================================

Originator: schramm ( Julie Schramm)
Date: Fri Oct 20 15:18:09 MDT 2000
Model: CSIM
Version: CSIM4.0.0
One-line summary: Initial version (pre-cleaned up version)
Changes made:

Initial version of the ice model, which is an aggregate of code
from LANL, NCAR and U-Wash.
===============================================================
===============================================================






























































